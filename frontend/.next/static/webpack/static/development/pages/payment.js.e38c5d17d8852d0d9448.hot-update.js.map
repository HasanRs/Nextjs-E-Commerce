{"version":3,"file":"static/webpack/static/development/pages/payment.js.e38c5d17d8852d0d9448.hot-update.js","sources":["webpack:///./components/CheckoutForm.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { CardElement, injectStripe } from \"react-stripe-elements\";\n\nclass CheckoutForm extends Component {\n  state = {\n    complete: false,\n    productsInCart: this.props.productsInCart,\n    customerDetails: this.props.customerDetails,\n    paymentCompleted: \"\"\n  };\n\n  submit = async () => {\n    console.log(\"checkout form\", this.state)\n    try {\n      let { token, error } = await this.props.stripe.createToken({\n        name: \"Name\",\n      });\n     \n      if (error) console.log(error);\n      const data = {\n        tokenId: token.id,\n        productsInCart: this.state.productsInCart\n        // products: [{id: , qty: 1}, ]\n        // amount: 1000\n      }\n      let response = await fetch('http://localhost:5000/charge', {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data)\n      });\n      \n      if (response.ok) {\n        console.log(\"payment completed\");\n        console.log(this.state)\n        this.setState({\n          paymentCompleted: \"Payment completed succesfully :)\"\n        })\n        this.setState({ complete: true });\n      }\n    } catch (e) {\n      console.log(\"this is the error:\", e);\n    }\n  };\n\n  render() {\n    \n    return (\n      <div className=\"checkout\">\n        <p>Would you like to complete the purchase?</p>\n        <CardElement />\n        <button onClick={this.submit}>complete payment</button>\n        <p>{this.state.paymentCompleted}</p>\n      </div>\n    );\n  }\n}\n\nexport default injectStripe(CheckoutForm);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;;;;;AAMA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AADA;AACA;AAJA;AAAA;AAGA;AAAA;AAIA;AACA;AACA;AACA;AAEA;AACA;AALA;AARA;AAAA;AAeA;AACA;AAAA;AAAA;AACA;AAHA;AACA;AAfA;AAcA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AA5BA;AAAA;AACA;AADA;AAAA;AAAA;AA6BA;AACA;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAgCA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAnDA;AACA;AAqDA;;;;A","sourceRoot":""}
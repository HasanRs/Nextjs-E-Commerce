{"version":3,"file":"static/webpack/static/development/pages/payment.js.a444ba72a8c1428b4a9b.hot-update.js","sources":["webpack:///./pages/payment.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Elements, StripeProvider } from \"react-stripe-elements\";\nimport CheckoutForm from \"../components/CheckoutForm\";\nimport Head from \"next/head\";\nimport Layout from '../components/Layout'\nimport Link from 'next/link'\nimport axios from \"axios\"\n\nclass Checkout extends Component {\n  state = {\n    stripe: null,\n    productsInCart: this.props.productsInCart,\n    customerDetails: this.props.customerDetails,\n    \n  }\n\n\n  componentDidMount() {\n  console.log(\"did mount\", this.state)\n    if (window.Stripe) {\n      this.setState({ stripe: window.Stripe(\"pk_test_6kBZOyTRFwWGyCm4gqzAXxbY00DdIRAzhY\") });\n      console.log(\"stripe is ready\");\n    } else {\n      document.querySelector(\"#stripe-js\").addEventListener(\"load\", () => {\n        // Create Stripe instance once Stripe.js loads\n        this.setState({ stripe: window.Stripe(\"pk_test_6kBZOyTRFwWGyCm4gqzAXxbY00DdIRAzhY\") });\n      });\n    }\n  }\n\n  createOrder = () => {\n    axios.post({\n      method: \"POST\",\n      url: \"http://localhost:5000/create-order\",\n      data: {\n        productsInCart: this.state.productsInCart,\n        customerDetails: this.state.customerDetails\n      }\n    }).then((order) => {\n      console.log(order)\n    })\n    .catch(err => {\n      console.log(err)\n    })\n    \n  }\n\n \n  render() {\n    // this.state.stripe will either be null or a Stripe instance\n    // depending on whether Stripe.js has loaded.\n    return (\n      <StripeProvider stripe={this.state.stripe}>\n        <Layout>\n        <div>\n          <Elements>\n            <div>\n              \n            <CheckoutForm productsInCart={this.state.productsInCart} />\n   <button onClick={this.createOrder}>create order</button>\n            </div>\n          </Elements>\n        </div>\n        </Layout>\n      </StripeProvider>\n    );\n  }\n}\n\nexport default Checkout;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAHA;AACA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAHA;AAQA;AACA;AAEA;AACA;AAEA;AACA;;;;;;AA7BA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;AAoBA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AA1DA;AACA;AA4DA;;;;A","sourceRoot":""}